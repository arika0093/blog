<!doctype html><html lang=ja-JP><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.119.0"><meta name=description content="Memo Blog"><meta name=keywords content="memo,tech"><meta name=author content="Arika"><title>Hugoを使ってブログを作成してみました |
Ark Memo</title><link rel=stylesheet href=/blog/css/index_d751713.min.ff739d432443c08b06376cfed20d258388c87c44a926ccfe909cd0119408177527e6c937a66e6ee1ba101779016faa16a5f1acd39104b53c47f0967e5b7742e4.css integrity="sha512-/3OdQyRDwIsGN2z+0g0lg4jIfESpJsz+kJzQEZQIF3Un5sk3pm5u4boQF3kBb6oWpfGs05EEtTxH8JZ+W3dC5A=="></head><body><header class=header><div class=header_left></div><div class=header_middle><a href=/blog/>Hugoを使ってブログを作成してみました -
Ark Memo</a></div></header><main><aside class=sidebar><ul class=section-tree><li class="dir closed-dir"><span class=dir-text>Vscodes</span><ul class=section-tree><li class=file><a href=/blog/vscode/vscode_dev_otameshi/ title=./blog/vscode/vscode_dev_otameshi/>vscode.devを使って出先からブログ更新</a></li><li class=file><a href=/blog/vscode/vscode_dev_use_android/ title=./blog/vscode/vscode_dev_use_android/></a></li></ul></li><li class="dir opened-dir"><span class=dir-text>Hugoes</span><ul class=section-tree><li class=file><a href=/blog/hugo/otameshi/ title=./blog/hugo/otameshi/>Hugoを使ってブログを作成してみました</a></li></ul></li><li class="dir closed-dir"><span class=dir-text>Pythons</span><ul class=section-tree><li class=file><a href=/blog/python/test2/ title=./blog/python/test2/>適当な日本語</a></li></ul></li><li class="dir closed-dir"><span class=dir-text>Posts</span><ul class=section-tree><li class=file><a href=/blog/posts/test/ title=./blog/posts/test/>Test</a></li></ul></li></ul></aside><aside class=exapandable></aside><article class=main><button class=sidebar-toggle-btn type=menu aria-expanded=false aria-haspopup=true>
<i class="bi bi-list"></i></button><div class=title><h1 class=title-header>Hugoを使ってブログを作成してみました</h1><div class=author-date-readtime><div class=author title><i class="bi bi-person"></i>
<a href=/blog/author/arika/ class=cat-btn>Arika</a></div><div class=date title><i class="bi bi-calendar3"></i>
<time datetime=2023-11-20>2023-11-20</time></div><div class=readtime title><i class="bi bi-clock"></i></div></div></div><div class=article-meta><div class=categories><i class="bi bi-bookmarks" title></i>
<a href=/blog/categories/otameshi/ class=cat-btn>otameshi</a></div><div class=tags><i class="bi bi-tags" title></i>
<a href=/blog/tags/app/ class=tag-btn>app</a>
<a href=/blog/tags/hugo/ class=tag-btn>hugo</a>
<a href=/blog/tags/blog/ class=tag-btn>blog</a>
<a href=/blog/tags/otameshi/ class=tag-btn>otameshi</a></div></div><nav id=TableOfContents><ul><li><a href=#作成まで>作成まで</a><ul><li><a href=#まずは>まずは</a></li><li><a href=#site作成>Site作成</a></li><li><a href=#content作成>Content作成</a></li><li><a href=#適当に書いてみる>適当に書いてみる</a></li></ul></li><li><a href=#themeを導入する>Themeを導入する</a><ul><li><a href=#導入方法>導入方法</a></li></ul></li><li><a href=#検索機能を導入する>検索機能を導入する</a><ul><li><a href=#探す>探す</a></li><li><a href=#導入>導入</a></li><li><a href=#ui微調整>UI微調整</a></li></ul></li><li><a href=#githubpageへdeployする>GithubPageへdeployする</a></li><li><a href=#baseurl対応をする>baseURL対応をする</a></li><li><a href=#所感>所感</a></li></ul></nav><div class=content><p>この記事が書かれているページがまさにそうなのですが、<a href=https://gohugo.io/>Hugo</a>を使用してブログを作成してみました。<br>以下、落とし穴とか所感とか。</p><h2 id=作成まで>作成まで</h2><h3 id=まずは>まずは</h3><p>Hugoをinstallする。<br>とりあえずWindows版をInstallした。<br><a href=https://gohugo.io/installation/windows/>https://gohugo.io/installation/windows/</a></p><h3 id=site作成>Site作成</h3><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=hugo%20new%20site%20%28path%29%20%20>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>hugo new site <span style=color:#f92672>(</span>path<span style=color:#f92672>)</span>  </span></span></code></pre></div></div><p>で終わり。色々なファイルが吐き出される。</p><h3 id=content作成>Content作成</h3><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=hugo%20new%20content%20posts/test.md%20%20>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>hugo new content posts/test.md  </span></span></code></pre></div></div><p>最初<code>test</code>とかで良いのかと思ったら、ちゃんとパスや.mdを書かないといけない。<br>ダルいと思ったが、このパスがカテゴリ的な扱いになっているのでちゃんと理由があった。<code>.md</code>に関しても、HTMLもデプロイできるので仕方ない。</p><h3 id=適当に書いてみる>適当に書いてみる</h3><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#ZgotmplZ>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>+++  
</span></span><span style=display:flex><span>title = &#39;Test&#39;  
</span></span><span style=display:flex><span>date = 2023-11-20T19:04:48+09:00  
</span></span><span style=display:flex><span>tags = [&#39;example&#39;,&#39;test&#39;]  
</span></span><span style=display:flex><span>categories = [&#39;test&#39;]  
</span></span><span style=display:flex><span>draft = false  
</span></span><span style=display:flex><span>+++  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>hogehoge  
</span></span><span style=display:flex><span>ぴよ  </span></span></code></pre></div></div><p>テンプレートは<code>archetypes/_default.md</code>にあった。<br>これを少し改造して、tagsとcategoriesが最初から入っているように改造。<br><code>draft</code>はfalseにしないと公開できない。<br>逆に言えば下書きをpushしておいて、出先で追記もできる。<br>先頭部分のメタ部分に使える情報は多分たくさんあるが、一旦これだけでOK。</p><h2 id=themeを導入する>Themeを導入する</h2><p>標準のままだと面白くないので、<a href=https://themes.gohugo.io/themes/>themes</a>から適当に探してみた。<br>今回は<a href=https://themes.gohugo.io/themes/dark-theme-editor/>dark-theme-editor</a>を導入する。</p><h3 id=導入方法>導入方法</h3><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#ZgotmplZ>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git clone https://github.com/JingWangTW/dark-theme-editor.git themes/dark-theme-editor  </span></span></code></pre></div></div><p>導入したままだとgitで追跡してくれないので<code>.git</code>を削除して<code>git add *</code>する。<br>いじらないならsubmodulesで良いと思うが、微調整をしたくなるので今回はこの方法でInstallした。</p><p>（余談だが、こういう人のレポジトリを引っ張ってきてそれを微調整したいときっていい方法ないよね。<code>patch</code>を都度あてるのも違うし、今回みたいにパクってupstreamがセットされていないのも気持ち悪いな…）</p><h2 id=検索機能を導入する>検索機能を導入する</h2><p>上記まででいい感じかと思ったのだが、検索機能がない。<br>普通にそれはブログとして微妙すぎるので、導入してみる。<br>（Google検索でもいい？それはそうなんだけど、UXがちょっとね…）</p><h3 id=探す>探す</h3><p>まずは<a href=https://gohugo.io/tools/search/>公式</a>から。<br>公式でのやり方があるわけではなく、<del>ぶん投げ</del>他のライブラリを使う必要がありそう。</p><h3 id=導入>導入</h3><p>いくつか調べてみて、<a href=https://gist.github.com/Arty2/8b0c43581013753438a3d35c15091a9f>これ</a>を使ってみることにした。</p><p>まずは手順に則る…と思っていくつか試してみたが、これ、<code>theme</code>フォルダの方をイジる必要があるらしい。<br>わかるわけない。</p><p>とりあえず、書いてあるとおりに変更を入れる。</p><blockquote><ol><li>Add <code>search.html</code> file to <code>layouts/partials/</code></li><li>Add <code>index.json</code> file to <code>layouts/_default/</code></li><li>Add JSON as additional output format in <code>config.yaml</code> or <code>config.toml</code></li><li>Add <code>fixedsearch.js</code> and <code>fuse.js</code> (downloaded from <a href=https://fusejs.io/>fusejs.io</a> or directly from <a href=https://cdn.jsdelivr.net/npm/fuse.js>jsdelivr</a>) to <code>static/scripts/fixedsearch/</code></li><li>Add the <code>search.html</code> partial by iincluding <code>{{ partialCached "search" . }}</code> in your theme’s <code>layouts/_default/baseof.html</code> before the <code>&lt;/body></code> tag.</li><li>Preview or deploy as usual. You can inspect the JSON index by visiting <code>localhost:1313/index.json</code></li></ol></blockquote><p>……うーん、長い。長いだけならいいのだけど、themeの本体に傷を入れないといけないのはちょっと。<br>まあ他にいい方法もなさそうなので、諦めてこれを導入。</p><h3 id=ui微調整>UI微調整</h3><p>導入してOKかと思ったら、これのCSSが特定のライブラリを元にしたものでフォントサイズとかが全然合わなくて困った。<br>ので修正。<br>ちなみにこれぐらい変更した。<br><a href=https://github.com/arika0093/blog/commit/b75c18e20125ea40fc8530968edf38b0e0708c9f>https://github.com/arika0093/blog/commit/b75c18e20125ea40fc8530968edf38b0e0708c9f</a></p><h2 id=githubpageへdeployする>GithubPageへdeployする</h2><p>自分でビルドするのもだるかったので、GitHub Actionsを使ってみた。<br>とはいえ、<a href=https://github.com/peaceiris/actions-hugo>actions-hugo</a>の内容をほぼ丸パクリするだけ。</p><p>成果物はこちらになります。<br><a href=https://github.com/arika0093/blog/blob/master/.github/workflows/gh-pages.yaml>https://github.com/arika0093/blog/blob/master/.github/workflows/gh-pages.yaml</a></p><p>……と調べながら今気づいたのだけど、これは旧来のやり方で、officialのやり方が好ましいぽい。まあいいか。<br><a href=https://zenn.dev/zozotech/articles/f2509a21b768ed>https://zenn.dev/zozotech/articles/f2509a21b768ed</a></p><h2 id=baseurl対応をする>baseURL対応をする</h2><p>github pagesは<code>https://hoge.github.io/blog</code>となり、root directoryが<code>/blog</code>になる。これのせいで大変だるかった。</p><p>まずパス指定だが、これは<code>baseURL</code>をgithub-actionsで変更することで対応した。</p><div class=codeblock><div class=copy-button-box><button class=copy-button state=copy data=#ZgotmplZ>
<i class="bi bi-copy"></i></button></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build  </span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify -b /blog/  </span></span></span></code></pre></div></div><p>relativeURLでも良さそうに見えるが、後述の問題があったのでこちらを採用した。</p><p>そして、前述のコンテンツ検索スクリプトが<code>/</code>にしか対応してなかったので、書き直した。具体的には<code>relURL</code>を使って現在のパスを<del>無理やり</del>取得する方法で対応した。</p><p>何回もミスったが、とりあえず対応完了。</p><p>現に、このサイトで <code>CTRL</code>+<code>/</code>を押せばちゃんと検索ダイアログが開くはず。</p><h2 id=所感>所感</h2><p>導入&この記事を実際に書いてみての所感。</p><ul><li>良いとこ<ul><li>ちょっとしたコードメモには良い。<ul><li>ファイルの実体が全てgit上にあるので、追いやすそう。<ul><li>zennとかqiitaに書くのは、tracability的にどうなのという気持ちがあった。<ul><li>とはいえzennは吐き出しできたので、そういう意味じゃこちらのアドはないか。</li></ul></li></ul></li></ul></li><li>スタイルを自由に弄れるのは良い<ul><li>まあこれはそのまま欠点でもあるのだけど。</li><li>世の中のmarkdownブログはどれもデザインというか行間がちょっと気に入らないので、そういう意味では自前は良い。</li></ul></li><li>殴り書きには良い。<ul><li>これはmarkdownなら全部そうだろうけど。こうやって階層構造で適当に色々書くのは性に合っている</li></ul></li></ul></li><li>悪いところ<ul><li>長文は微妙。<ul><li>書くのがつらいのもそうだけど、画像を手軽に貼れないのがちょっと。<ul><li>これに関してはvscodeの拡張とかなんかありそうではある。</li><li>imgurにアップロードするやつありそう。<ul><li>imgurかはわからないけど、<a href="https://marketplace.visualstudio.com/items?itemName=hancel.markdown-image">一応あった</a>。</li></ul></li></ul></li></ul></li><li>改行を自動反映してくれない。<ul><li>ちゃんと末尾にスペースを2個いれないといけない。<ul><li>だるすぎるので、vscodeの方で対応した。<ul><li><code>markdown.preview.breaks: true</code>の設定をONにすれば良い。<ul><li>と思ったら、これはプレビューの見た目だけだった。残念</li></ul></li><li>拡張機能(Prettier)で対応。保存時に勝手に整形してくれる。<ul><li>これも思ったのと違う。</li></ul></li><li>結局、<code>s/\n/ \n/g</code> で対応した。力技。</li></ul></li></ul></li></ul></li><li>左の項目名が勝手に複数形になる。<ul><li><code>Post</code>-><code>posts</code>とかならいいけど、<code>Hugoes</code>ってなんだよ。</li></ul></li></ul></li></ul><p>所感とは違うけど、普段文字を入力しなすぎて20分間タイピングしてるだけでつらい。タイピング筋を鍛えないといけない（？）</p></div></article></main><footer class=footer><div class=footer-left><ul class=social><li>Arika</li><li><a href=https://github.com/arika0093 target=_blank><i class=bi-github></i></a></li><li><a href=https://x.com/ark4x target=_blank><i class=bi-twitter></i></a></li></ul></div><div class=footer-right><ul class="control status clearfix"><li>Word Count:
2380</li><li>Last modified: &nbsp;
<time>2023-11-20 23:25:41</time></li><li title></li></ul></div></footer><form id=search-form class=noscript method=get action=https://google.com/ data-base-url=/blog/><div class=search-bar><span class=search--hint>CTRL + /</span>
<input id=search-input class=search--display name=q tabindex=0 autocomplete=off placeholder="Search Contents...">
<input id=search-submit class=icon type=submit value=🔍></div><ul id=search-results class=search--display></ul></form><script src=/blog/scripts/fixedsearch/fixedsearch.js></script><style>#search-form{display:block;position:fixed;top:0;right:0;margin:0;padding:2px 25px;min-width:var(--icon-size,1.2rem);max-height:100vh;z-index:1000}#search-form.search--display,#search-form[data-focus=false] .search--display{display:none}#search-form[data-focus=true] .search--display{display:block}#search-form.search--hint,#search-form[data-focus=true] .search--hint{display:none}#search-form[data-focus=false] .search--hint{display:block}#search-form .search-bar{display:flex;height:1.4rem;align-items:center}#search-form .search-bar{color:#ccc}#search-form[data-focus=true] .search-bar{border:2.5px solid rgb(var(--accent-color,'0,0,255'))}#search-form[data-focus=true] .search-bar:not(:focus-within){border-color:#ccc}.search--hint{color:#888;font-size:9pt;margin:0 1em}#search-input{display:block;padding:.3rem;width:25rem;max-width:100vw;height:100%;background:#0080ff10;border:none;color:inherit;outline:none;text-align:left;font-size:11pt}#search-submit{display:block;margin:0 var(--icon-pad,.1rem)0 0;padding:0;width:var(--icon-size,1.2rem);height:var(--icon-size,1.2rem);line-height:var(--icon-size,1.2rem);background:inherit;color:inherit;font-size:11pt;border:none}#search-submit:hover,#search-submit:focus{color:rgb(var(--accent-color,'0,0,255'))}#search-results{display:block;flex-grow:2;margin:.5px 0 0;padding:0;max-height:calc(100vh - 1.4rem - .5px);width:100%;overflow-x:hidden;overflow-y:auto;backdrop-filter:blur(var(--page-color-blur,2px));border:2.5px solid;color:#ccc;font-size:var(--s-2,.8rem);scrollbar-color:#CCC rgb(var(--page-color,'240,240,240'))!important;scrollbar-width:thin!important}#search-results:empty{display:none;opacity:0}#search-results li{margin:0;width:100%;background-color:rgba(var(--page-color,'240,240,240'),var(--page-color-transparency,.89));border-top:.5px dashed;list-style:none}#search-results li:first-child{border:none}#search-results a{display:block;padding:.3rem;display:block;text-decoration:none}#search-results a:hover,#search-results a:focus{background:#0080ff60;color:rgb(var(--page-color,'240,240,240'));outline:0}#search-results a:active{background:rgb(var(--accent-color,'0,0,255'));color:rgb(var(--page-color,'240,240,240'))}#search-results li span:empty{display:none}#search-results li span:not(:last-child)::after{content:' – '}#search-results li .title{display:block;margin-bottom:calc(var(--line-height,1.4em)/3)}#search-results li .title::after{display:none}</style></body><script type=text/javascript src=/blog/js/index_d751713.min.5eeb120f16ea146352725c420364f87befead45f678142b8f0ffbef024646931fbc06bff07a7bd6cb57fa2f8cd8a21ba6a4ee5a278ec32303a378bc1cd17f246.js integrity="sha512-XusSDxbqFGNSclxCA2T4e+/q1F9ngUK48P++8CRkaTH7wGv/B6e9bLV/ovjNiiG6ak7lonjsMjA6N4vBzRfyRg=="></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css></html>